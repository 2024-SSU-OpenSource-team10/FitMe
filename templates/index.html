<!-- 메인 페이지 -->

<!-- base.html의 뼈대를 사용 -->
{% extends "base.html" %}  


{% block user %}
  <!-- 로그인 되지 않은 상태 -->
  {% if user == "Login_needed" %}
    <a href="{{url_for("login")}}">Login</a>
    <a href="{{url_for("signin")}}">회원가입</a>

  <!-- 관리자(root)로 로그인되어있는 상태 -->
  {% elif user == "root" %}
    <h3>관리자 계정입니다</h3>
    <a href="{{url_for("product_registration")}}">제품 등록</a>
    <a href="{{url_for("logout")}}">Logout</a>

  <!-- 일반 유저로 로그인되어있는 상태 -->
  {% else %}
    <p>user : {{user}}</p>
    <a href="{{url_for("logout")}}">Logout</a>
  {% endif %}

{% endblock user %}


{% block contents %}

  <div style="margin-top:30px;">
    <div style="margin-top:10px;">
      <h3>
        제품 목록
      </h3>
    </div>
    <!-- 제품이 없는 경우 -->
    {% if products == "No_products" %}
      <div>
        <p>제품이 없습니다</p>
      </div>
    <!-- 제품이 있는 경우 -->
    {% else %}
      {% for pid in products %}
        <a href="{{url_for("product_detail", pid = pid)}}">
          <div style="margin-top: 80px; border-style:solid; border-color: aqua;">
            <!-- 제품 이미지 -->
            <div style="margin-top: 10px;">  
              <img src="/static/images/{{pid}}.jpg" alt="제품 이미지" width="200px">
            </div>
            <!-- 제품 이름 -->
            <div style="margin-top:5px;">    
              {{products[pid]['product_name']}}
            </div>
            <!-- 제품 가격 -->
            <div style="margin-top:5px;">    
              {{products[pid]['price']}}
            </div>
          </div>
        </a>
      {% endfor %}
    {% endif %}
  </div>

{% endblock contents %}